'use strict';ob.directive('orbitview',['Images',function(e){return{restrict:'E',transclude:!0,templateUrl:'views/view.html',controller:function(e){this.addTooltip=function(t){e.tooltips.push(t)},this.addDescription=function(t){e.description=t}},link:function(t,l,r){e.loadxml().then(function(l){if(window.DOMParser){let e;var r=(new DOMParser).parseFromString(l.data,'text/xml')}else{var r;(r=new ActiveXObject('Microsoft.XMLDOM')).async='false',r.loadXML(l)}let i=r.getElementsByTagName('img'),s=r.getElementsByTagName('scale');e.level=[],e.ext=i[0].getAttribute('ext');for(let t=0;t<s.length;t++)if(Number(s[t].getAttribute('width'))>200){e.level.push({value:Number(s[t].getAttribute('value').replace('.','')),width:Number(s[t].getAttribute('width')),height:Number(s[t].getAttribute('height')),cols:Number(s[t].getAttribute('cols')),rows:Number(s[t].getAttribute('rows')),tileHeight:Number(s[t].getAttribute('tile_height')),tileWidth:Number(s[t].getAttribute('tile_width')),resources:[]});for(let l=0;l<i.length;l++){e.level[t].resources.push([]);for(let r=0;r<e.level[t].cols*e.level[t].rows;r++){let s=e.url()+'images/'+i[l].getAttribute('name')+'_'+e.level[t].value+'_'+Math.floor(r/e.level[t].rows)+'_'+r%e.level[t].rows+'.'+e.ext;e.level[t].resources[l].push({loaded:!1,img:s})}}}e.nbAngle=e.level[0].resources.length,t.init()})}}}]);
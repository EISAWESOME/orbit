(function(){ob.directive("orbitview",["Images",function(a){return{restrict:"E",transclude:!0,templateUrl:"views/view.html",controller:function(a){this.addTooltip=function(d){a.tooltips.push(d)};this.addDescription=function(d){a.description=d}},link:function(g,d,k){a.loadxml().then(function(e){if(window.DOMParser)var c=(new DOMParser).parseFromString(e.data,"text/xml");else c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(e);e=c.getElementsByTagName("img");c=c.getElementsByTagName("scale");
a.level=[];a.ext=e[0].getAttribute("ext");for(var b=0;b<c.length;b++)if(200<Number(c[b].getAttribute("width"))){a.level.push({value:Number(c[b].getAttribute("value").replace(".","")),width:Number(c[b].getAttribute("width")),height:Number(c[b].getAttribute("height")),cols:Number(c[b].getAttribute("cols")),rows:Number(c[b].getAttribute("rows")),tileHeight:Number(c[b].getAttribute("tile_height")),tileWidth:Number(c[b].getAttribute("tile_width")),resources:[]});for(var d=0;d<e.length;d++){a.level[b].resources.push([]);
for(var f=0;f<a.level[b].cols*a.level[b].rows;f++){var h=a.url()+"images/"+e[d].getAttribute("name")+"_"+a.level[b].value+"_"+Math.floor(f/a.level[b].rows)+"_"+f%a.level[b].rows+"."+a.ext;a.level[b].resources[d].push({loaded:!1,img:h})}}}a.nbAngle=a.level[0].resources.length;g.init()})}}}])})();
